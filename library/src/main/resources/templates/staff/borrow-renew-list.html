<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Yêu cầu gia hạn</title>
    <meta charset="UTF-8"/>
</head>
<body>
<h2>Danh sách yêu cầu gia hạn đang chờ</h2>

<table border="1" cellpadding="6" cellspacing="0">
    <thead>
    <tr>
        <th>ID</th>
        <th>Mã phiếu mượn</th>
        <th>Người mượn</th>
        <th>Hạn hiện tại</th>
        <th>Hạn đề xuất</th>
        <th>Ghi chú của người mượn</th>
        <th>Thao tác</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="req : ${requests}">
        <td th:text="${req.requestId}">1</td>
        <td th:text="${req.borrowTicket.ticketNumber}">BT-001</td>
        <td th:text="${req.requestedBy.user.fullName}">Nguyễn Văn A</td>
        <td th:text="${req.borrowTicket.dueDate}">2025-11-10</td>
        <td th:text="${req.proposedDueDate}">2025-11-15</td>
        <td th:text="${req.notes}">muốn đọc thêm</td>
        <td>
            <!-- Approve -->
            <form th:action="@{|/staff/borrow-renew/${req.requestId}/approve|}" method="post" style="display:inline">
                <!-- nếu bạn không lấy employee từ session mà truyền tay thì thêm hidden -->
                <!-- <input type="hidden" name="employeeId" value="1"/> -->
                <button type="submit">Duyệt</button>
            </form>

            <!-- Reject -->
            <form th:action="@{|/staff/borrow-renew/${req.requestId}/reject|}" method="post" style="display:inline">
                <!-- <input type="hidden" name="employeeId" value="1"/> -->
                <input type="text" name="reason" placeholder="Lý do từ chối"/>
                <button type="submit">Từ chối</button>
            </form>
        </td>
    </tr>

    <tr th:if="${#lists.isEmpty(requests)}">
        <td colspan="7">Hiện không có yêu cầu gia hạn nào.</td>
    </tr>
    </tbody>
</table>

<!-- thông báo -->
<div th:if="${success}" style="color: green" th:text="${success}"></div>
<div th:if="${error}" style="color: red" th:text="${error}"></div>

</body>
</html>
