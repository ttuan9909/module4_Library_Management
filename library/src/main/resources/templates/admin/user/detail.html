<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>üìã Chi ti·∫øt th√†nh vi√™n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { background-color: #f6f7fb; font-family: "Segoe UI", sans-serif; }
        .detail-card { margin-top: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .info-label { font-weight: 600; color: #5a6270; margin-bottom: 5px; }
        .info-value { font-size: 1.05rem; padding: 8px 0; border-bottom: 1px solid #eee; }
        .avatar-container {
            width: 150px; height: 150px; border-radius: 50%;
            overflow: hidden; border: 4px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .card-library { border-left: 5px solid #0d6efd; background-color: #e9f0ff; } /* Style m·ªõi cho ph·∫ßn Th·∫ª */
        .status-badge { 
            padding: .35em .65em; font-size: 75%; font-weight: 700; line-height: 1; 
            color: #fff; text-align: center; white-space: nowrap; vertical-align: baseline; 
            border-radius: .25rem;
        }
        .status-ACTIVE { background-color: #28a745; }
        .status-LOCKED { background-color: #dc3545; }
        .status-DISABLED { background-color: #ffc107; color: #343a40; }
    </style>
</head>
<body>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card detail-card">
                <div class="card-header bg-primary text-white text-center py-3">
                    <h4 class="mb-0"><i class="fas fa-user-circle me-2"></i> Chi Ti·∫øt Th√†nh Vi√™n</h4>
                </div>
                <div class="card-body p-4">

                    <div class="text-center mb-4">
                        <div class="avatar-container mx-auto">
                            <img th:src="${user.avatarUrl} ?: 'https://jbagy.me/wp-content/uploads/2025/03/Hinh-anh-avatar-cute-chibi-nu-ngo-nghinh-1.jpg'"
                                 onerror="this.onerror=null; this.src='https://jbagy.me/wp-content/uploads/2025/03/Hinh-anh-avatar-cute-chibi-nu-ngo-nghinh-1.jpg';"
                                 alt="Avatar" class="img-fluid" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <h3 class="mt-3 mb-1" th:text="${user.fullName}">T√™n Th√†nh Vi√™n</h3>
                        <p class="text-muted" th:text="${user.username}"></p>
                    </div>

                    <h5 class="mb-3 text-primary"><i class="fas fa-id-card me-2"></i> Th√¥ng Tin T√†i Kho·∫£n</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <div class="info-label">Email</div>
                                <div class="info-value" th:text="${user.email}"></div>
                            </div>
                            <div class="mb-3">
                                <div class="info-label">S·ªë ƒëi·ªán tho·∫°i</div>
                                <div class="info-value" th:text="${user.phoneNumber}"></div>
                            </div>
                            <div class="mb-3">
                                <div class="info-label">Ng√†y sinh</div>
                                <div class="info-value" th:text="${user.dateOfBirth} ?: 'N/A'"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <div class="info-label">Vai tr√≤</div>
                                <div class="info-value" th:text="${user.roleName}"></div>
                            </div>
                            <div class="mb-3">
                                <div class="info-label">Tr·∫°ng th√°i t√†i kho·∫£n</div>
                                <div class="info-value" th:text="${user.status}"></div>
                            </div>
                            <div class="mb-3">
                                <div class="info-label">M√£ ID</div>
                                <div class="info-value" th:text="${user.userId}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="info-label">ƒê·ªãa ch·ªâ</div>
                        <div class="info-value" th:text="${user.address} ?: 'Ch∆∞a c·∫≠p nh·∫≠t'"></div>
                    </div>
                    
                    <hr class="my-4">

                    <h5 class="mb-3 text-info"><i class="fas fa-credit-card me-2"></i> Th√¥ng Tin Th·∫ª Th∆∞ Vi·ªán</h5>
                    
                    <div th:if="${user.libraryCard != null}" class="card p-3 card-library">
                        <div class="row">
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <div class="info-label">S·ªë Th·∫ª (Card Number)</div>
                                    <div class="info-value fw-bold" th:text="${user.libraryCard.cardNumber}">CARD-XXXXXX</div>
                                </div>
                                <div class="mb-3">
                                    <div class="info-label">Ng√†y B·∫Øt ƒê·∫ßu</div>
                                    <div class="info-value" th:text="${#temporals.format(user.libraryCard.startDate, 'dd-MM-yyyy')}"></div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <div class="info-label">Ng√†y K·∫øt Th√∫c (H·∫°n)</div>
                                    <div class="info-value text-danger" th:text="${#temporals.format(user.libraryCard.endDate, 'dd-MM-yyyy')}"></div>
                                </div>
                                <div class="mb-3">
                                    <div class="info-label">Tr·∫°ng Th√°i Th·∫ª</div>
                                    <div class="info-value">
                                        <span class="status-badge" 
                                              th:classappend="|status-${user.libraryCard.status}|"
                                              th:text="${user.libraryCard.status}">
                                            ACTIVE
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-12 mt-2">
                                <div class="info-label">Ghi ch√∫ (Notes)</div>
                                <div class="p-2 border rounded bg-white" 
                                     th:text="${user.libraryCard.notes} ?: 'Kh√¥ng c√≥ ghi ch√∫'">Kh√¥ng c√≥ ghi ch√∫</div>
                            </div>
                        </div>
                    </div>
                    
                    <div th:unless="${user.libraryCard != null}" class="alert alert-warning text-center">
                        <i class="fas fa-exclamation-triangle me-2"></i> Th√†nh vi√™n n√†y ch∆∞a c√≥ Th·∫ª Th∆∞ Vi·ªán ƒë∆∞·ª£c t·∫°o.
                    </div>

                    <div class="text-center mt-4">
                        <a th:href="@{/admin/users}" class="btn btn-secondary"><i class="fas fa-arrow-left me-2"></i> Quay l·∫°i danh s√°ch</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>